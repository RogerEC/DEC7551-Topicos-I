<!DOCTYPE html>
<html>
<head>
	
	<title>Rastreamento de policiais</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>

<style>
#MENSAGENS{
  height:100px;
  overflow-y: scroll;
  background: lightgray;
}
</style>
	
</head>
<body>



<div id="mapid" style="width: 100%; height: 400px;"></div>

Mensagens:
<div id="MENSAGENS">

</div>
<script>
var x=0;
	var mymap = L.map('mapid').setView([-28.948233, -49.4636407], 17);

	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: '',
		id: 'mapbox.streets'
	}).addTo(mymap);
 var iconePolicial = L.icon({
    iconUrl: 'policial.png',
    iconSize: [26, 26]
});

var objDiv = document.getElementById("MENSAGENS");

  
    var policial1 = L.marker([-28.9482, -49.4636407]);
    policial1.nome='Capit√£o Nascimento';
    policial1.ID  = 123;
    policial1.bindTooltip(policial1.nome,{ permanent: true}).openTooltip();
    policial1.setIcon(iconePolicial);
    policial1.on('click', function(e) {
      document.getElementById('MENSAGENS').innerHTML+='Selecionou '+ e.target.nome+'   '+e.target.ID+'<br>';
 



objDiv.scrollTop = objDiv.scrollHeight;


    });

    policial1.addTo(mymap);
    
    
    
    var policial2 = L.marker([-28.946233, -49.46224237]);
        policial2.nome='Harry Callahan';
    policial2.ID  = 456;
    policial2.bindTooltip(policial2.nome,{ permanent: true}).openTooltip();
    policial2.setIcon(iconePolicial);
     policial2.on('click', function(e) {
      document.getElementById('MENSAGENS').innerHTML+='Selecionou '+ e.target.nome+'   '+e.target.ID+'<br>';





objDiv.scrollTop = objDiv.scrollHeight;
    });
    policial2.addTo(mymap);
    
    
    // demonstra como atualizar as coordenadas dos onibus
    setInterval(function(){
    	policial1.setLatLng([-28.948233+x, -49.4636407+x]);
    	policial2.setLatLng([-28.948233-x, -49.4636407-x]);
    	x+=0.00005;
    }
    ,1000);
    
     
	

</script>



</body>
</html>

